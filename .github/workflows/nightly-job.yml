name: Efficient scheduled job

on:
  schedule:
    # Run every 5 minutes. In real-world, you probably want to run this once a day.
    - cron: '*/5 * * * *'

jobs:
  release-nightly:
    # Do we have commits from yesterday? If not, skip.
    if: $(git log --oneline --since '24 hours ago' | wc -l) > 0
    runs-on: ubuntu-latest
    steps:
      - name: Build and release
        run:  sleep 10 && echo "Done! 👍"